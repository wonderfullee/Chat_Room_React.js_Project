(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{14:function(e,s,t){},16:function(e,s,t){},18:function(e,s,t){"use strict";t.r(s);var n=t(0),a=t.n(n),r=t(3),i=t.n(r),c=(t(14),t(4)),u=t(5),o=t(8),g=t(6),l=t(7),m=t(1),d=(t(16),function(e){var s=e.users.map(function(e){return a.a.createElement("li",{key:e,className:"user"},e)});return a.a.createElement("ul",{className:"active-users"},s)}),p=function(e){var s=e.messages.map(function(e){return a.a.createElement("li",{key:e.source+e.text,className:"message"},a.a.createElement("span",{className:"source"},e.source),a.a.createElement("span",{className:"text"},e.text))});return a.a.createElement("ul",{className:"messages"},s)},h=function(e){var s=e.users,t=e.messages;return a.a.createElement("div",{className:"passive-area"},a.a.createElement(d,{users:s}),a.a.createElement(p,{messages:t}),a.a.createElement("ul",{className:"messages"}))},f=function(e){var s=e.updatePendingUsername,t=e.username,n=e.executeLogin;return a.a.createElement("div",{className:"login-controls"},a.a.createElement("input",{className:"username",placeholder:"Your user name",onChange:s,onKeyDown:function(e){"Enter"===e.key&&n()},value:t}),a.a.createElement("button",{onClick:n},"Login"))},v=function(e){var s=e.updatePendingMessage,t=e.message,n=e.sendMessage;return a.a.createElement("div",{className:"message-controls"},a.a.createElement("input",{onChange:s,onKeyDown:function(e){"Enter"===e.key&&n()},className:"new-message",placeholder:"Enter Message",value:t}),a.a.createElement("button",{onClick:n,className:"send-message"},"Send"))},M=function(e){var s=e.isLoggedIn,t=e.updatePendingMessage,n=e.message,r=e.sendMessage,i=e.updatePendingUsername,c=e.username,u=e.executeLogin;return a.a.createElement("div",{className:"active-area"},s||a.a.createElement(f,{updatePendingUsername:i,username:c,executeLogin:u}),s&&a.a.createElement(v,{sendMessage:r,message:n,updatePendingMessage:t}),a.a.createElement("div",null,"Status Line"))},E=function(e){function s(){var e;return Object(c.a)(this,s),(e=Object(o.a)(this,Object(g.a)(s).call(this))).state={user:"",users:[],pendingUsername:"",messages:[],pendingMessage:""},e.updatePendingMessage=e.updatePendingMessage.bind(Object(m.a)(Object(m.a)(e))),e.updatePendingUsername=e.updatePendingUsername.bind(Object(m.a)(Object(m.a)(e))),e.executeLogin=e.executeLogin.bind(Object(m.a)(Object(m.a)(e))),e.sendMessage=e.sendMessage.bind(Object(m.a)(Object(m.a)(e))),e.pollMessages=e.pollMessages.bind(Object(m.a)(Object(m.a)(e))),e.updateMessageList=e.updateMessageList.bind(Object(m.a)(Object(m.a)(e))),e}return Object(l.a)(s,e),Object(u.a)(s,[{key:"componentDidMount",value:function(){this.pollMessages()}},{key:"updateMessageList",value:function(e){this.setState({messages:e.messages,users:e.users})}},{key:"pollMessages",value:function(){fetch("/messages",{method:"GET"}).then(function(e){return e.ok?e.json():Promise.reject("fetch-error")}).then(this.updateMessageList).catch(function(e){console.warn("ERROR: ".concat(e))}),setTimeout(this.pollMessages,3e3)}},{key:"updatePendingMessage",value:function(e){this.setState({pendingMessage:e.target.value})}},{key:"updatePendingUsername",value:function(e){this.setState({pendingUsername:e.target.value})}},{key:"executeLogin",value:function(){this.setState({user:this.state.pendingUsername,pendingUsername:""})}},{key:"sendMessage",value:function(){(function(e){var s=e.source,t=e.text;return fetch("/messages",{method:"POST",body:JSON.stringify({source:s,text:t}),headers:new Headers({"content-type":"application/json"})}).then(function(e){return e.ok?e.json():(console.log("error"),Promise.reject("fetch-error"))})})({source:this.state.user,text:this.state.pendingMessage}).then(this.updateMessageList).catch(function(e){console.warn("ERROR: ".concat(e))}),this.setState({pendingMessage:""})}},{key:"render",value:function(){this.state.user;return a.a.createElement("div",{className:"App"},a.a.createElement(h,{users:this.state.users,messages:this.state.messages}),a.a.createElement(M,{isLoggedIn:!!this.state.user,sendMessage:this.sendMessage,message:this.state.pendingMessage,updatePendingMessage:this.updatePendingMessage,updatePendingUsername:this.updatePendingUsername,username:this.state.pendingUsername,executeLogin:this.executeLogin}))}}]),s}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(a.a.createElement(E,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},9:function(e,s,t){e.exports=t(18)}},[[9,2,1]]]);
//# sourceMappingURL=main.2b338f64.chunk.js.map